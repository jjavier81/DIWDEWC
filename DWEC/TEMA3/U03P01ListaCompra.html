<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <h1>Lista de la compra</h1>
    <input type="text" name='producto' placeholder="Ej: Merluza" id="nuevoproducto"/>
    <select name="categoria" id="categorias">
      <option value=0>Escoge una categoría...</option>
      <option value="blue">Pescados</option>
      <option value="brown">Carnes</option>
      <option value="gold">Fiambres</option>
      <option value="magenta">Limpieza</option>
      <option value="ligthblue">Congelados</option>
      <option value="gold">Panadería</option>
      <option value="red">Perfumeria</option>
      <option value="violet">Baño</option>
      <option value="black">Otros</option>
    </select>
    <button onclick="anadirElemento()">Añadir elemento</button>
    <button onclick="borrarLista()">Borrar lista</button>
    <hr />
    <script type="text/javascript">
    /*----------------------OPCIONAL------------------------------*/
      /*Creo divs segun categoria*/
      //Selecciono la longitud del select para hacer un bucle
      var longSelect = document.getElementsByTagName("select")[0].length;
      for (var i = 1; i < longSelect; i++ ) {
        //Cojo el valor del option para asignarselo como id al div
        var idDiv = document.getElementsByTagName("option")[i].value;
        //Creo el div
        var divProducto = document.createElement("div");
        //Creo el texto que contiene el div como titulo seleccionando el texto del option
        var txtdivProducto = document.createTextNode(document.getElementsByTagName("option")[i].innerHTML);
        //Cuelgo el txt del div creado
        divProducto.appendChild(txtdivProducto);
        //Cambio el color al div creado (correspondiente al color del producto) y lo cuelgo de body
        document.body.appendChild(divProducto).style.color = idDiv;
        //le asigno la id al div
        divProducto.setAttribute("id", idDiv);
      }
      /*---------------------------------------------------------------*/
      function anadirElemento() {
        //Seleccionamos el elemento introducido por el usuario
        var elemento = document.getElementById('nuevoproducto').value;
        if (elemento == "") {
          alert("Introduce un producto");
        } else {
          //seleccionamos la categoría seleccionada por el usuario
          var categoria = document.getElementById('categorias').value;
          if (categoria == 0) {
            alert("Selecciona una categoría");
          } else {
            //Creo el elemento P
            var miP = document.createElement("p");
            //Creo el texto del elemento P
            var txtmiP = document.createTextNode(elemento);
            //Cuelgo el texto del elemento P de P
            miP.appendChild(txtmiP);
            //Cuelgo el elemento P del div correspondiente  y le asigno un estilo
            var divDeCategoria = document.getElementById(categoria);
            divDeCategoria.appendChild(miP).style.textIndent = "15px";
            //Le asigno el atributo onclick para borrar elementos
            miP.setAttribute("class", "listacompra");
            miP.setAttribute("onclick", "borrarElemento()");
            //Reseteo las cajas
            document.getElementById('nuevoproducto').value = "";
            document.getElementById('categorias').value = 0;
          }
        }
      }
      //Funcion borrarElemento
      function borrarElemento() {
        var elementoaborrar = document.querySelector("p:hover");
        document.body.removeChild(elementoaborrar);
      }

      //Funcion borrarLista
      function borrarLista() {
        var listaaborrarlongitud = document.getElementsByClassName('listacompra').length;
        var listaaborrar = document.getElementsByClassName('listacompra');
        for(var i = 0; i < listaaborrarlongitud; i++) {
          document.body.removeChild(listaaborrar[0]);
        }
      }

    </script>
  </body>
</html>
